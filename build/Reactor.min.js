var Reactor=Reactor||{};!function(t,e){var r=React.createClass({displayName:"SwitchView",render:function(){var t=this.props.else||React.DOM.span(null),e={};React.Children.forEach(this.props.children,function(t,r){e[r]=t,t.props.id&&(e[t.props.id]=t)});var r=null;return null!==this.props.show?r=this.props.show:this.props.else||(r=0),e[r]&&(t=e[r]),React.addons.cloneWithProps(t,this.props.clientProps)}}),n=React.createClass({displayName:"Animate",getInitialState:function(){return{show:0}},componentWillMount:function(){var t=this.props.children;t.length&&(this.timer=setInterval(function(){var e=this.state.show+1;t.length<=e&&(e=0),this.setState({show:e})}.bind(this),this.props.interval||1e3))},componentWillUnmount:function(){clearInterval(this.timer)},render:function(){return r({show:this.state.show},this.props.children)}}),o=Backbone.history.loadUrl;Backbone.history.loadUrl=function(t){return t=this.fragment=this.getFragment(t),this.trigger("preroute",t),o.apply(this,arguments)};var i=React.createClass({displayName:"Router",getInitialState:function(){return{route:null,clientProps:null}},_extractParameters:function(){return Backbone.Router.prototype._extractParameters.apply(this,arguments)},_routeToRegExp:function(){return Backbone.Router.prototype._routeToRegExp.apply(this,arguments)},handleRoute:function(t){var e=!1,r=0;React.Children.forEach(this.props.children,function(n){if(!e){var o=null,i=null,s=n.props.route;if(!s)return;if(_.isRegExp(s)||(s=this._routeToRegExp(s),o=this._extractParameters(s,n.props.route)),s.test(t)){e=!0;var a=this._extractParameters(s,t);if(a.length>0){i={};for(var l in a){var u=o[l];u&&(u=u.substring(1))&&(i[u]=a[l])}}this.setState({route:r,clientProps:i})}}r++}.bind(this)),e||this.setState({route:null,clientProps:null})},componentWillMount:function(){Backbone.history.on("preroute",this.handleRoute,this)},componentWillUnmount:function(){Backbone.history.off("preroute",this.handleRoute,this)},render:function(){return r({show:this.state.route,clientProps:this.state.clientProps,"else":this.props.notFound||React.DOM.span(null)},this.props.children)}});if(t={SwitchView:r,Animate:n,Router:i},e)for(var s in t)e[s]=t[s]}(Reactor,window),"undefined"!=typeof module&&module&&module.exports&&(module.exports=Reactor),"undefined"!=typeof define&&define&&define.call&&define(["Reactor"],function(t){return t});